<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shaolin Bolt Overlay</title>
    <!-- Load Montserrat so the overlay renders consistently -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div id="overlay" role="region" aria-label="Stream overlay">
        <img id="background" alt="Overlay background" />
        <img id="logo" alt="Channel logo" />
        <h1 id="mainTitle" aria-live="polite"></h1>
        <h2 id="subTitle" aria-live="polite"></h2>
    </div>

    <script>
    (function() {
        const defaults = {
            background: 'assets/storm-bg.png',
            logo: 'assets/bolt-logo.png',
            mainTitle: 'Starting Soon',
            subTitle: 'Welcome to the Bolt Dojo',
            mainColor: '#00AEEF',
            subColor: null
        };

        function applyConfig(config) {
            const cfg = Object.assign({}, defaults, config || {});
            const backgroundEl = document.getElementById('background');
            const logoEl = document.getElementById('logo');
            const mainTitleEl = document.getElementById('mainTitle');
            const subTitleEl = document.getElementById('subTitle');

            if (cfg.background) backgroundEl.src = cfg.background;
            if (cfg.logo) logoEl.src = cfg.logo;

            mainTitleEl.textContent = cfg.mainTitle || '';
            subTitleEl.textContent = cfg.subTitle || '';

            // Allow separate subtitle color; fall back to mainColor if not provided
            const subColor = cfg.subColor || cfg.mainColor;
            mainTitleEl.style.color = cfg.mainColor || defaults.mainColor;
            subTitleEl.style.color = subColor;
        }

        fetch('config.json')
            .then(response => {
                if (!response.ok) throw new Error('Failed to fetch config.json: ' + response.status);
                return response.json();
            })
            .then(config => applyConfig(config))
            .catch(err => {
                console.warn('Overlay: using defaults due to config load error:', err);
                applyConfig(defaults);
            });
    })();
    </script>
</body>
</html>